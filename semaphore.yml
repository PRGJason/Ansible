version: v1.0
name: Ping Windows Task
agent:
  machine:
    type: e1-standard-2
    os_image: ubuntu1804

blocks:
  - name: "Execute Ansible Playbook on Windows Host"
    task:
      secrets:
        - name: prguser  # If using secrets for credentials

            jobs:
  - name: Setup and Run Ansible Playbook
    commands:
      - checkout
      - pip install pywinrm requests  # Install the required Python modules
      - ansible-playbook -i inventory ping-playbook.yml
